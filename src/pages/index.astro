---
import Layout from '../layouts/Layout.astro';
import fs from 'node:fs/promises';
import path from 'node:path';

const registryPath = path.resolve('tools/registry.json');
const registryData = await fs.readFile(registryPath, 'utf-8');
const registry = JSON.parse(registryData);

const tools = await Promise.all(registry
  .filter((entry: any) => entry.status === 'active')
  .map(async (entry: any) => {
    const defPath = path.resolve(`tools/definitions/${entry.slug}.json`);
  const defData = await fs.readFile(defPath, 'utf-8');
  return { ...entry, definition: JSON.parse(defData) };
}));
---

<Layout title="Econified | Master Your Work Decisions" canonicalUrl="https://econified.com/">
  <main class="container">
    <div style="text-align: center; margin-bottom: 4rem;">
      <h1>Make Data-Driven Career Decisions.</h1>
      <p class="lead">Global salary comparisons and economic decision tools.</p>
    </div>

    <!-- HERO FEATURE BLOCK for Entity Alignment -->
    <div class="glass-panel feature-hero" style="margin-bottom: 4rem; padding: 4rem 2rem; text-align: center; background: linear-gradient(145deg, rgba(30,41,59,0.9), rgba(15,23,42,1)); border: 2px solid var(--primary); border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.5);">
      <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem; font-size: 0.85rem; color: var(--primary-light); text-transform: uppercase; letter-spacing: 0.1em; font-weight: 600;">
        <span>Remote Salary Calculator</span> &bull; <span>Cost-of-Living Adjusted Pay</span>
      </div>
      <h2 style="font-size: 2.8rem; margin-top: 0; margin-bottom: 1.5rem; color: var(--text-primary);">üåç Global Salary Intelligence</h2>
      <p style="font-size: 1.25rem; color: var(--text-secondary); max-width: 650px; margin: 0 auto 2.5rem; line-height: 1.6;">
        Compare salaries worldwide and discover your real purchasing power across countries. 
      </p>
      <a href="/global-salary/" class="btn" style="font-size: 1.15rem; padding: 1rem 2.5rem; background: var(--primary); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; display: inline-block; transition: background 0.2s, transform 0.2s;">Try Global Salary Calculator</a>
    </div>

    <h2 style="margin-bottom: 2rem; font-size: 1.6rem; text-align: center;">Utility Calculators</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
      {tools.map((tool: any) => (
        <a href={`/${tool.slug}`} class="glass-panel" style="display: block; transition: transform 0.2s, box-shadow 0.2s; text-decoration: none;">
          <h2 style="color: var(--accent-light);">{tool.definition.title}</h2>
          <p style="margin-bottom: 0;">{tool.definition.description}</p>
        </a>
      ))}
    </div>
  </main>
</Layout>
